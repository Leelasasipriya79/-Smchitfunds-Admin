<!doctype html>
<html lang="en">
<head>  
    <meta charset="utf-8">
    <title>Sm Chitfund - Stop ROI</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta content="Premium Multipurpose Admin & Dashboard Template" name="description">
    <meta content="Themesbrand" name="author">
    <!-- App favicon -->
    <link rel="shortcut icon" href="assets/images/favicon.ico">

    <link href="assets/libs/chartist/chartist.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

    <!-- Bootstrap Css -->
    <link href="assets/css/bootstrap.min.css" id="bootstrap-style" rel="stylesheet" type="text/css">
    <!-- Icons Css -->
    <link href="assets/css/icons.min.css" rel="stylesheet" type="text/css">
    <!-- App Css-->
    <link href="assets/css/app.min.css" id="app-style" rel="stylesheet" type="text/css">

    <!-- Custom Styles -->
   
</head>

<body data-sidebar>

    <!-- Begin page -->
    <div id="layout-wrapper">

        <header id="page-topbar">
            <div class="navbar-header">
                <div class="d-flex align-items-center">
                    <!-- LOGO -->
                    <div class="navbar-brand-box" style="margin-right: auto; padding-left: 15px;">
                        <a href="index.html" class="logo logo-dark">
                            <span class="logo-sm">
                                <img src="assets/images/logo.jpg" alt="SM Chitfund" height="70" style="margin-left: -10px;">
                            </span>
                            <span class="logo-lg">
                                <img src="assets/images/logo.jpg" alt="SM Chitfund" height="70" style="margin-left: -10px;">
                            </span>
                        </a>
                    </div>
        
                    <button type="button" class="btn btn-sm px-3 font-size-24 header-item waves-effect" id="vertical-menu-btn">
                        <i class="mdi mdi-menu"></i>
                    </button>
                </div>
            </div>
        </header>

        <div class="vertical-menu">
            <div data-simplebar class="h-100">
                <!--- Sidemenu -->
                <div id="sidebar-menu">
                    <!-- Left Menu Start -->
                    <ul class="metismenu list-unstyled" id="side-menu">
                        <li>
                            <a href="index.html" class="waves-effect">
                                <i class="fas fa-tachometer-alt me-2"></i>
                                <span>Dashboard</span>
                            </a>
                        </li>
                        <li>
                            <a href="edit-password.html" class="waves-effect">
                                <i class="fas fa-key me-2"></i>
                                <span>Edit Password</span>
                            </a>
                        </li>
                        <li>
                            <a href="user.html" class="waves-effect">
                                <i class="fas fa-id-card me-2"></i>
                                <span>User Details</span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0)" class="has-arrow waves-effect">
                                <i class="fas fa-users-cog me-2"></i>
                                <span>User Management</span>
                            </a>
                            <ul class="submenu">
                                <li><a href="view-member.html">View Member</a></li>
                                <li><a href="search-member.html">Search Member</a></li>
                                <li><a href="activation-history.html">Activation History</a></li>
                                <li><a href="online-payment-status.html">Online Payment Status</a></li>
                            </ul>
                        </li>
                        <li>
                            <a href="chit-name-amount.html" class="waves-effect">
                                <i class="fas fa-receipt me-2"></i>
                                <span>Chits Name & Amount</span>
                            </a>
                        </li>
                        <li>
                            <a href="javascript:void(0)" class="has-arrow waves-effect">
                                <i class="fas fa-id-badge me-2"></i>
                                <span>KYC</span>
                            </a>
                            <ul class="submenu">
                                <li><a href="kyc-pending.html">KYC Pending</a></li>
                                <li><a href="kyc-history.html">KYC History</a></li>
                            </ul>
                        </li>
                        <li>
                            <a href="javascript:void(0)" class="has-arrow waves-effect">
                                <i class="fas fa-user-tie me-2"></i>
                                <span>Agents</span>
                            </a>
                            <ul class="submenu">
                                <li><a href="earninghistory.html">Earning History of Agents</a></li>
                            </ul>
                        </li>
                        <li>
                            <a href="javascript:void(0)" class="has-arrow waves-effect">
                                <i class="fas fa-exchange-alt me-2"></i>
                                <span>Fund Manager</span>
                            </a>
                            <ul class="submenu">
                                <li><a href="fund-transfer.html">Fund Transfer</a></li>
                                <li><a href="fund-transfer-history.html">Fund Transfer History</a></li>
                            </ul>
                        </li>
                        <li>
                            <a href="javascript:void(0)" class="has-arrow waves-effect">
                                <i class="fas fa-credit-card me-2"></i>
                                <span>Payouts</span>
                            </a>
                            <ul class="submenu">
                                <li><a href="payout-request.html">Payout Requests</a></li>
                                <li><a href="payout-history.html">Payout History</a></li>
                            </ul>
                        </li>
                        <li>
                            <a href="javascript:void(0)" class="has-arrow waves-effect">
                                <i class="fas fa-university me-2"></i>
                                <span>Withdraw</span>
                            </a>
                            <ul class="submenu">
                                <li><a href="wallet-withdraw-status.html">Wallet Withdraw Status</a></li>
                            </ul>
                        </li>
                        <li>
                            <a href="javascript:void(0)" class="has-arrow waves-effect">
                                <i class="fas fa-sitemap me-2"></i>
                                <span>Team</span>
                            </a>
                            <ul class="submenu">
                                <li><a href="my-direct.html">My Direct</a></li>
                                <li><a href="my-downline.html">My Downline</a></li>
                                <li><a href="level-team.html">Level Team</a></li>
                            </ul>
                        </li>
                        <li>
                            <a href="javascript:void(0)" class="has-arrow waves-effect">
                                <i class="fas fa-coins me-2"></i>
                                <span>Income</span>
                            </a>
                            <ul class="submenu">
                                <li><a href="referral-income.html">Referral Income</a></li>
                                <li><a href="level-income.html">Level Income</a></li>
                                <li><a href="level-income-on-roi.html">Level Income On ROI</a></li>
                                <li><a href="rank-reward-income.html">Rank & Reward Income</a></li>
                            </ul>
                        </li>
                        <li>
                            <a href="javascript:void(0)" class="has-arrow waves-effect">
                                <i class="fas fa-wallet me-2"></i>
                                <span>Wallet</span>
                            </a>
                            <ul class="submenu">
                                <li><a href="wallet-statement.html">Wallet Statement</a></li>
                                <li><a href="wallet-outstanding.html">Wallet Outstanding</a></li>
                            </ul>
                        </li>
                        <li>
                            <a href="javascript:void(0)" class="has-arrow waves-effect">
                                <i class="fas fa-tools me-2"></i>
                                <span>Setting</span>
                            </a>
                            <ul class="submenu">
                                <li><a href="popup-update.html">Pop-Up Setting</a></li>
                                <li><a href="stop-roi.html">Stop ROI</a></li>
                            </ul>
                        </li>
                        <li>
                            <a href="qr.html" class="waves-effect">
                                <i class="fas fa-qrcode me-2"></i>
                                <span>QR Code</span>
                            </a>
                        </li>
                        <li>
                            <a href="notification.html" class="waves-effect">
                                <i class="fas fa-bell me-2"></i>
                                <span>Notification</span>
                            </a>
                        </li>
                        <li>
                            <a href="#" class="waves-effect">
                                <i class="fas fa-sign-out-alt me-2"></i>
                                <span>Signout</span>
                            </a>
                        </li>
                    </ul>
                </div>
                
                <!-- Sidebar -->
            </div>
        </div>

        <div class="main-content">
            <div class="page-content">
                <div class="container-fluid">
                    <div class="page-title-box">
                        <div class="row align-items-center">
                            <div class="col-md-8">
                                <h6 class="page-title">Stop ROI</h6>
                                <ol class="breadcrumb m-0">
                                    <li class="breadcrumb-item"><a href="#">Setting</a></li>
                                    <li class="breadcrumb-item active">Stop ROI</li>
                                </ol>
                            </div>
                            <div class="col-md-4">
                                <div class="float-end d-none d-md-block"></div>
                            </div>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-12">
                            <div class="card">
                                <div class="card-body" style="overflow-x: hidden;">
                                    <div class="d-flex justify-content-between align-items-center mb-4">
                                        <h4 class="card-title mb-0">Stop ROI</h4>
                                        <button class="btn btn-success btn-sm add-new-date-btn" data-bs-toggle="modal" data-bs-target="#addDateModal">+ Add New Date</button>
                                    </div>
                                    <div class="dataTables_length" id="datatable_length">
                                        <label>Show 
                                            <select name="datatable_length" aria-controls="datatable" class="form-select form-select-sm">
                                                <option value="10">10</option>
                                                <option value="25">25</option>
                                                <option value="50">50</option>
                                                <option value="100">100</option>
                                            </select> entries
                                        </label>
                                    </div>
                                    <div id="datatable_filter" class="dataTables_filter" style="float: right;">
                                        <label>Search: <input type="search" class="form-control form-control-sm" placeholder="" aria-controls="datatable"></label>
                                    </div>

                                    <div id="table1" class="table-container">
                                        <table class="table table-bordered dt-responsive nowrap" style="border-collapse: collapse; border-spacing: 0; width: 100%; table-layout: fixed;">
                                            <thead>
                                                <tr>
                                                    <th style="padding: 8px 10px; font-size: 14px; vertical-align: middle; font-weight: 600; border-bottom: 2px solid #dee2e6; width: 5%;">#</th>
                                                    <th style="padding: 8px 10px; font-size: 14px; vertical-align: middle; font-weight: 600; border-bottom: 2px solid #dee2e6; width: 40%;">Stop Date</th>
                                                    <th style="padding: 8px 10px; font-size: 14px; vertical-align: middle; font-weight: 600; border-bottom: 2px solid #dee2e6; width: 40%;">Add Date</th>
                                                    <th style="padding: 8px 10px; font-size: 14px; vertical-align: middle; font-weight: 600; border-bottom: 2px solid #dee2e6; width: 15%;">Action</th>
                                                </tr>
                                            </thead>
                                            <tbody id="roi-table-body">
                                                <!-- Data will be populated dynamically by JavaScript -->
                                            </tbody>
                                        </table>
                                        <div class="dataTables_info" id="datatable_info1" role="status" aria-live="polite">Showing 0 to 0 of 0 entries</div>
                                    </div>

                                    <div class="dataTables_paginate paging_simple_numbers" id="datatable_paginate">
                                        <ul class="pagination">
                                            <li class="paginate_button page-item previous disabled" id="datatable_previous">
                                                <a href="#" aria-controls="datatable" data-page="previous" class="page-link">Previous</a>
                                            </li>
                                            <li class="paginate_button page-item next disabled" id="datatable_next">
                                                <a href="#" aria-controls="datatable" data-page="next" class="page-link">Next</a>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <footer class="footer">
                <div class="container-fluid">
                    <div class="row">
                        <div class="col-12">
                            © <script>document.write(new Date().getFullYear())</script> Sri Muneshwara Chits - developed By Bloom It Solutions
                        </div>
                    </div>
                </div>
            </footer>
        </div>

    </div>

    <!-- Modal for Adding New Date -->
    <div class="modal fade" id="addDateModal" tabindex="-1" aria-labelledby="addDateModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="addDateModalLabel">Add New Date</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="addDateForm">
                        <div class="mb-3">
                            <label for="stopDate" class="form-label">Stop Date</label>
                            <input type="date" class="form-control" id="stopDate" required>
                        </div>
                        <div class="mb-3">
                            <label for="addDate" class="form-label">Add Date</label>
                            <input type="date" class="form-control" id="addDate" required>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary" onclick="addNewDate()">Add Date</button>
                </div>
            </div>
        </div>
    </div>

    <div class="rightbar-overlay"></div>

    <!-- JAVASCRIPT -->
    <script src="assets/libs/jquery/jquery.min.js"></script>
    <script src="assets/libs/bootstrap/js/bootstrap.bundle.min.js"></script>
    <script src="assets/libs/metismenu/metisMenu.min.js"></script>
    <script src="assets/libs/simplebar/simplebar.min.js"></script>
    <script src="assets/libs/node-waves/waves.min.js"></script>

    <script src="assets/js/app.js"></script>

    <!-- Custom JavaScript for Stop ROI -->
    <script>
        $(document).ready(function() {
            const tableBody = $('#roi-table-body');
            const paginationLinks = $('.paginate_button a');
            const infoText = $('#datatable_info1');
            let currentPage = 1;
            const entriesPerPage = 10;
            let roiData = []; // Start with no data
            let totalEntries = roiData.length;
            let totalPages = Math.ceil(totalEntries / entriesPerPage);

            // Function to render table data for the current page
            function renderTable(page) {
                tableBody.empty();
                const start = (page - 1) * entriesPerPage;
                const end = Math.min(start + entriesPerPage, totalEntries);
                const pageData = roiData.slice(start, end);

                if (pageData.length === 0) {
                    tableBody.append(`
                        <tr>
                            <td colspan="4" style="padding: 8px 10px; font-size: 14px; text-align: center;">No data available in table</td>
                        </tr>
                    `);
                } else {
                    pageData.forEach(row => {
                        tableBody.append(`
                            <tr style="background-color: transparent;">
                                <td style="padding: 8px 10px; font-size: 14px; vertical-align: middle; width: 5%;">${row.id}</td>
                                <td style="padding: 8px 10px; font-size: 14px; vertical-align: middle; width: 40%;">${row.stopDate}</td>
                                <td style="padding: 8px 10px; font-size: 14px; vertical-align: middle; width: 40%;">${row.addDate}</td>
                                <td style="padding: 8px 10px; font-size: 14px; vertical-align: middle; width: 15%; text-align: center;">
                                    <button class="btn btn-danger btn-sm" onclick="deleteEntry(${row.id})">Delete</button>
                                </td>
                            </tr>
                        `);
                    });
                }

                infoText.text(`Showing ${start + 1} to ${end} of ${totalEntries} entries`);
            }

            // Function to add a new date
            window.addNewDate = function() {
                const stopDate = $('#stopDate').val();
                const addDate = $('#addDate').val();

                if (!stopDate || !addDate) {
                    alert('Please fill in both dates.');
                    return;
                }

                const newEntry = {
                    id: roiData.length + 1,
                    stopDate: stopDate,
                    addDate: addDate
                };

                roiData.push(newEntry);
                totalEntries = roiData.length;
                totalPages = Math.ceil(totalEntries / entriesPerPage);

                // Update pagination if necessary
                if (currentPage > totalPages) {
                    currentPage = totalPages;
                }

                renderTable(currentPage);
                updatePagination();
                $('#addDateModal').modal('hide');
                $('#addDateForm')[0].reset();
            };

            // Function to delete an entry
            window.deleteEntry = function(id) {
                if (confirm('Are you sure you want to delete this entry?')) {
                    roiData = roiData.filter(row => row.id !== id);
                    // Reassign IDs to maintain sequential order
                    roiData.forEach((row, index) => {
                        row.id = index + 1;
                    });
                    totalEntries = roiData.length;
                    totalPages = Math.ceil(totalEntries / entriesPerPage);

                    // Adjust current page if necessary
                    if (currentPage > totalPages && totalPages > 0) {
                        currentPage = totalPages;
                    } else if (totalPages === 0) {
                        currentPage = 1;
                    }

                    renderTable(currentPage);
                    updatePagination();
                }
            };

            // Function to update pagination state
            function updatePagination() {
                paginationLinks.parent().removeClass('disabled');
                if (currentPage === 1) {
                    $('#datatable_previous').addClass('disabled');
                }
                if (currentPage === totalPages || totalEntries === 0) {
                    $('#datatable_next').addClass('disabled');
                }
            }

            // Handle pagination clicks
            paginationLinks.on('click', function(e) {
                e.preventDefault();
                const page = $(this).data('page');
                if (page === 'previous' && currentPage > 1) {
                    currentPage--;
                } else if (page === 'next' && currentPage < totalPages) {
                    currentPage++;
                }
                renderTable(currentPage);
                updatePagination();
            });

            // Initial render
            renderTable(currentPage);
            updatePagination();

            // Toggle sidebar on mobile
            $('#vertical-menu-btn').on('click', function() {
                $('.vertical-menu').toggleClass('active');
            });
        });
    </script>

</body>
</html>